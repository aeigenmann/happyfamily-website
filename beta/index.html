<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HappyFamily</title>
  <link rel="stylesheet" href="../styles.css">
  <script type="module">
    import { parse } from "../plist-parse.js";
    const response = await fetch("../screentime/manifest.plist");
    const manifestXML = await response.text();
    const manifest = parse(manifestXML);
    document.querySelector("#screentime .name").textContent = manifest["items"][0]["metadata"]["title"];
    document.querySelector("#screentime .version").textContent = manifest["items"][0]["metadata"]["bundle-version"];
  </script>
</head>

<body>
  <div class="app" id="screentime">
    <img src="../screentime/icon-512x512.png" class="icon">
    <h1 class="name"></h1>
    <h3 class="version"></h3>
    <form action="itms-services://?action=download-manifest&url=../screentime/manifest.plist">
      <button type="submit">Install</button>
    </form>
  </div>
</body>

</html>